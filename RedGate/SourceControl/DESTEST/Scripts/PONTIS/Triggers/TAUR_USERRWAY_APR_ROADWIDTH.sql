CREATE OR REPLACE TRIGGER pontis.TAUR_USERRWAY_APR_ROADWIDTH
	AFTER UPDATE OF AROADWIDTH_NEAR, AROADWIDTH_FAR ON pontis.USERRWAY

	FOR EACH ROW

	




DECLARE V_ARoadWidth_NBI NUMBER(5,2);
BEGIN

IF (:NEW.AROADWIDTH_NEAR is not Null and :NEW.AROADWIDTH_NEAR > 0) and
   (:NEW.AROADWIDTH_FAR is NOT null and :NEW.AROADWIDTH_FAR > 0) then
	V_ARoadWidth_NBI := LEAST(:NEW.AROADWIDTH_NEAR,:NEW.AROADWIDTH_FAR);
else
	if :NEW.AROADWIDTH_NEAR is Null OR :NEW.AROADWIDTH_NEAR <= 0 then
		V_ARoadWidth_NBI := :NEW.AROADWIDTH_FAR;
 	end if;
	if :NEW.AROADWIDTH_FAR is Null OR :NEW.AROADWIDTH_FAR <= 0 then
		V_ARoadWidth_NBI := :NEW.AROADWIDTH_NEAR;
        end if;
end if;

-- Now, Put This Approach Roadway Width into the Pontis ROADWAY Table;
UPDATE ROADWAY
	SET AROADWIDTH = round(V_ARoadWidth_NBI,2)
	WHERE
	ROADWAY.BRKEY = :OLD.BRKEY
      AND ROADWAY.ON_UNDER = :OLD.ON_UNDER;

END TAUR_USERRWAY_APR_ROADWIDTH;
/